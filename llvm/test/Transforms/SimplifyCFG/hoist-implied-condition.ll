; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt < %s -passes=simplifycfg -S | FileCheck %s

define i32 @src(ptr %contents.0, i64 %contents.1) {

start:
  %cmp1 = icmp ugt i64 %contents.1, 7
  br i1 %cmp1, label %if, label %exit

if:
  %load = load i64, ptr %contents.0
  %cmp2 = icmp eq i64 %load, 123
  %cmp3 = icmp eq i64 %contents.1, 16
  %and = and i1 %cmp2, %cmp3
  br i1 %and, label %if2, label %exit

if2:
  ret i32 1

exit:
  ret i32 0
}

define i32 @src-and(ptr %contents.0, i64 %contents.1) {
start:
  %cmp1 = icmp ugt i64 %contents.1, 7
  br i1 %cmp1, label %if, label %exit

if:
  %load = load i64, ptr %contents.0
  %cmp2 = icmp eq i64 %load, 123
  %cmp3 = icmp eq i64 %contents.1, 16
  %and = or i1 %cmp2, %cmp3
  br i1 %and, label %if2, label %exit

if2:
  ret i32 1

exit:
  ret i32 0
}

define i32 @src-sideeffects(ptr %contents.0, i64 %contents.1) {
start:
  %cmp1 = icmp ugt i64 %contents.1, 7
  br i1 %cmp1, label %if, label %exit

if:
  %load = load i64, ptr %contents.0
  %cmp2 = icmp eq i64 %load, 123
  %cmp3 = icmp eq i64 %contents.1, 16
  %and = and i1 %cmp2, %cmp3
  %add = add i64 %load, %contents.1
  store i64 %add, ptr %contents.0
  br i1 %and, label %if2, label %exit

if2:
  ret i32 1

exit:
  ret i32 0
}
